# Backend README

Проект **Backend** представляет собой серверную часть приложения **CheckerPolygon**. Он реализован на **ASP.NET Core** и обеспечивает API для работы с полигонами.

## Запуск Backend

Для запуска серверной части используйте **Docker**. Выполните следующую команду в корневом каталоге проекта:

```bash
docker-compose up --build
```

После запуска **backend** будет доступен по адресу: `http://localhost:50150` или `http://<ip>:50150`.

## Swagger

После запуска **backend**, документация **Swagger** будет доступна по адресу: `http://localhost:50150/swagger` или `http://<ip>:50150/swagger`. Swagger предоставляет интерфейс для тестирования всех доступных endpoint'ов API, а также предоставляет информацию о каждом endpoint, его параметрах и возвращаемых данных.

### Использование Swagger

Swagger позволяет:
- Просматривать все доступные endpoint'ы API.
- Тестировать каждый endpoint с использованием удобного интерфейса.
- Получать информацию о требуемых параметрах и структуре ответов.
- Генерировать клиентские SDK для взаимодействия с API.

## Структура проекта

- `/Controllers` — контроллеры, содержащие логику обработки HTTP-запросов.
- `/Models` — модели данных, используемые в приложении.
- `/Services` — сервисы, обеспечивающие бизнес-логику.
- `/Repositories` — классы для доступа к данным.

## Подключение к базе данных PostgreSQL

Бэкенд использует **PostgreSQL** для хранения данных. Для работы с базой данных подключение настроено через строку подключения, которая указывается в переменных окружения Docker.

### Настройка PostgreSQL

В **docker-compose.yml** описан сервис **postgres**, который запускает контейнер с базой данных PostgreSQL. Для корректной работы необходимо:

1. Убедиться, что сервис PostgreSQL работает и доступен.
2. Проверьте переменные окружения для подключения к базе данных:
   - `POSTGRES_DB` — имя базы данных.
   - `POSTGRES_USER` — имя пользователя.
   - `POSTGRES_PASSWORD` — пароль пользователя.

Пример строки подключения (в переменных окружения Docker):
```bash
POSTGRES_CONNECTION_STRING=Host=postgres;Port=5432;Username=postgres;Password=yourpassword;Database=checkerpolygon
```

### Описание сервиса PostgreSQL

- **Контейнер PostgreSQL**:
  - Использует официальный образ `postgres` с настройками по умолчанию.
  - База данных создается автоматически при запуске контейнера.
  - Для доступа используется переменная окружения `POSTGRES_PASSWORD`.

### Управление базой данных

1. Для запуска контейнера с PostgreSQL используйте команду:
   ```bash
   docker-compose up -d postgres
   ```

2. Для остановки контейнера:
   ```bash
   docker-compose down
   ```

3. Для доступа к базе данных можно использовать любые PostgreSQL клиенты, подключив их по адресу `localhost:5432`.

## Подробности про API

### Основные endpoint'ы:

1. **POST /api/Polygon/check-point**
   - **Описание**: Проверяет, находится ли заданная точка внутри полигона.
   - **Параметры**: Принимает объект с координатами точки и вершинами полигона.
   - **Ответ**: Возвращает информацию о том, находится ли точка внутри полигона.

2. **POST /api/Polygon/save**
   - **Описание**: Сохраняет новый полигон.
   - **Параметры**: Принимает массив вершин полигона.
   - **Ответ**: Возвращает ID сохраненного полигона.

3. **GET /api/Polygon/load-all**
   - **Описание**: Загружает все сохраненные полигоны.
   - **Параметры**: Не принимает параметров.
   - **Ответ**: Возвращает список всех сохраненных полигонов.

4. **GET /api/Polygon/load/{id}**
   - **Описание**: Загружает полигон по его ID.
   - **Параметры**: Принимает ID полигона в качестве параметра пути.
   - **Ответ**: Возвращает информацию о полигоне с указанным ID.

